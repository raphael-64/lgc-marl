name: lgc-marl-overcooked

# Use Ray image with CUDA support
image_uri: anyscale/ray:2.43.0-slim-py312-cu125

# Compute configuration - CPU only (model is tiny, env is CPU-bound)
compute_config:
  head_node:
    instance_type: m5.xlarge # 4 CPU - coordinates workers
  worker_nodes:
    - instance_type: m5.2xlarge # 8 CPU each, no GPU needed
      min_nodes: 4
      max_nodes: 12
      market_type: ON_DEMAND

# Working directory (uploaded to cluster)
working_dir: .

# Cloud - leave empty for org default, or use cloud name (not ID)
cloud:

# Entry point - install deps then run
entrypoint: pip install torch wandb weave openai gymnasium overcooked-ai python-dotenv omegaconf hydra-core networkx && python scripts/train_overcooked_parallel.py --stages 7 --device cpu --parallel 12

max_retries: 0
