name: lgc-marl-overcooked

# Use Ray image with CUDA support
image_uri: anyscale/ray:2.43.0-slim-py312-cu125

# Compute configuration
compute_config:
  head_node:
    instance_type: m5.xlarge # CPU only - coordinates workers
  worker_nodes:
    - instance_type: g6.xlarge # 4 CPU + 1 L4 GPU each
      min_nodes: 1
      max_nodes: 4
      market_type: ON_DEMAND

# Working directory (uploaded to cluster)
working_dir: .

# Environment variables
env_vars:
  WANDB_API_KEY: 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
  OPENAI_API_KEY: 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

# Cloud - leave empty for org default, or use cloud name (not ID)
cloud:

# Entry point - install deps then run
entrypoint: pip install torch wandb weave openai gymnasium overcooked-ai python-dotenv omegaconf hydra-core && python scripts/train_overcooked_parallel.py --stages 11 --device cuda

max_retries: 0
